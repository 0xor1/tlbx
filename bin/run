#!/bin/bash
docker ps --format '{{.Names}}' | grep "^wtf-" | awk '{print $1}' | xargs -I {} docker stop {} && \
tmux \
new-session -swtf-$1 "go run cmd/$1/main.go ${@:2}" \; \
split-window -v "/bin/bash -c \"npm --prefix cmd/$1/client i; npm --prefix cmd/$1/client run serve; exec bash\"" \; \
split-window -h "docker-compose -f cmd/$1/docker-compose.yml up" \; \